# 建站要求
## 公网
我们家庭所使用的网络基本都是由运行商提ISP(电信、联通)提供的，但是一般由运行商提供的网络都是私有网络。私有网络就是在某个已有的网络上在建立一个层级的网络。简单的说就是一个路由器在插一个路由器，这样理论可以非常多的子网，但是任意两个子网之间如果不做配置是无法进行通信的。而且外部是不能直接访问内部网络的。常见的内网一般都是以192.168.x.x或者以10.x.x.x这种形式。如果我们想在自己的家里建立服务器，最好就是先弄好公网（当然也可以使用内网穿透，但是慢）。如果是买服务器的是自带公网ip的。

- 一般电信是可以使用公网ip的，但是会封掉80端口，不过我们可以使用443:https://www.v2ex.com/t/230913
- 内网穿透:https://www.zhihu.com/question/49629610
## ipv4,ipv6
现在的网络基本都是ipv4环境。就是32位的ip地址,而且用的是10进制。这样稍微做计算都知道不够地球那么多用户使用，所以才有了上面的私有网络的情况。现在有了新版的规范ipv6，128位16进制的地址可供每家每户的使用。在ipv6的时代我们都是公网的，但是ipv6不是那么容易申请到的，可是大部分211院校都是直接提供ipv6地址的。而且ipv6进行科学上网还没有被封
## 域名DNS
找到一个服务器的要通过ip地址进行确定，ip地址是由数字组成的，非常难记，而且如果我突然换了ip地址别人就找不到了。于是就有了域名。域名可以映射到ip地址上,这个映射是由DNS完成的，就好比www.baidu.com。我们一看就知道是百度的页面，然后由一台DNS服务器将域名找到对应的ip地址，再将ip地址返回给请求的浏览器。

域名之内还有别称
1. baidu.com 顶级域名
2. www.baidu.com 二级域名
3. *.baidu.com 泛域名

- DNS获取地址一般是有电脑设定的DNS服务器找到的，而且可以逐级往上查找。当然一开始会先从hosts文件中查找，甚至可以使用这种方式去除广告https://github.com/vokins/yhosts
- 域名可以使用在腾讯云，阿里云进行购买一般是10元左右一年(.cn)或者找国外的免费域名(.tk)
## http,https
一般用浏览器访问网页都是使用了http超文本传输协议，传输html内容。每一个网络协议都有对应的端口号，http协议使用的是80端口。但是大部分运营商都会屏蔽掉80端口，这时我们就要使用别的端口了，但是使用别的端口要在ip地址或域名后面加上:<端口号>。我们还可以使用新的协议https，这个协议是在http上在加入的一些安全协议。对网站会安全晖由好处，而且使用的是443端口，并且不用额外写上端口号
## ssl证书
ssl证书现在都要进行申请，认证。一般都是由某些企业或组织提供签发。如果是免费的一般都是二级域名证书，每换一个二级域名都要重新申请一个证书。一个证书通常包含密钥.key，和证书.crt，可能会有一个中间申请文件cst

- 获取key,cst http://www.itbulu.com/free-alphassl.html
- 申请证书crt  https://www.wn789.com/5861.html
## ddns
假如我们自家设备有了公网ip，但是我们会发现每次重新拨号时，公网ip每次都变。这时我们就需要ddns动态dns，自动将域名映射到最新的ip地址上。常见的ddns服务提供商有dnspod(腾讯)、alidns(阿里)。最好要根据自己的域名找对应的ddns。
## dmz主机和端口转发
如果使用公网ip访问我们家里的网络，会被路由器控制。如果路由器没有配置是不能找到我们自己要搭建的Web服务器上的。dmz是一个虚拟主机，简单的说就是把这个内网的设备直接映射给这个公网ip。端口转发是对于请求的ip对应的端口可以控制转发到不同的设备上。可以看出一个是基于域名的，一个是基于端口的。不过dmz会将某个主机直接暴漏出去，难免是会有些危险。

我使用的方案是dmz + nginx，将控制权交给子网中的某个虚拟机的nginx完成，这样我就可以实现泛域名解析。而且nginx可以更加灵活的进行配置。当然也可以在路由器上建立nginx

熟悉了上面的内容，如果有一个完善的路由和强大动手能力，很快我们就能通过自己的域名访问自己家中的设备了